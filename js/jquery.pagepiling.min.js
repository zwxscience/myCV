var needscrollPage=true;(function(A){A.fn.pagepiling=function(K){var N=A(this);var d;var Q=0;var D=(("ontouchstart" in window)||(navigator.msMaxTouchPoints>0));var T=touchStartX=touchEndY=touchEndX=0;var j=600;K=A.extend({direction:"vertical",menu:null,verticalCentered:true,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"swing",loopBottom:false,loopTop:false,css3:true,navigation:{"textColor":"#000","bulletsColor":"#000","position":"right","tooltips":["section1","section2","section3","section4"]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:true,sectionSelector:".section",animateAnchor:false,afterLoad:null,onLeave:null,afterRender:null},K);A.fn.pagepiling.setScrollingSpeed=function(p){K.scrollingSpeed=p};A.fn.pagepiling.setMouseWheelScrolling=function(p){if(p){O()}else{R()}};A.fn.pagepiling.setAllowScrolling=function(p){if(p){A.fn.pagepiling.setMouseWheelScrolling(true);J()}else{A.fn.pagepiling.setMouseWheelScrolling(false);P()}};A.fn.pagepiling.setKeyboardScrolling=function(p){K.keyboardScrolling=p};A.fn.pagepiling.moveSectionUp=function(){var p=A(".pp-section.active").prev(".pp-section");if(!p.length&&K.loopTop){p=A(".pp-section").last()}if(p.length){H(p)}};A.fn.pagepiling.moveSectionDown=function(){var p=A(".pp-section.active").next(".pp-section");if(!p.length&&K.loopBottom){p=A(".pp-section").first()}if(p.length){H(p)}};A.fn.pagepiling.moveTo=function(p){var q="";if(isNaN(p)){q=A('[data-anchor="'+p+'"]')}else{q=A(".pp-section").eq((p-1))}if(q.length>0){H(q)}};A(K.sectionSelector).each(function(){A(this).addClass("pp-section")});if(K.css3){K.css3=I()}A(N).css({"overflow":"hidden","-ms-touch-action":"none","touch-action":"none"});A.fn.pagepiling.setAllowScrolling(true);if(!A.isEmptyObject(K.navigation)){a()}var m=A(".pp-section").length;A(".pp-section").each(function(p){A(this).data("data-index",p);A(this).css("z-index",m);if(!p&&A(".pp-section.active").length===0){A(this).addClass("active")}if(typeof K.anchors[p]!=="undefined"){A(this).attr("data-anchor",K.anchors[p])}if(typeof K.sectionsColor[p]!=="undefined"){A(this).css("background-color",K.sectionsColor[p])}if(K.verticalCentered){e(A(this))}m=m-1}).promise().done(function(){if(K.navigation){A("#pp-nav").css("margin-top","-"+(A("#pp-nav").height()/2)+"px");A("#pp-nav").find("li").eq(A(".pp-section.active").index(".pp-section")).find("a").addClass("active")}A(window).on("load",function(){E()});A.isFunction(K.afterRender)&&K.afterRender.call(this)});function e(p){p.addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />')}function i(q){var r=A(".pp-section.active").index(".pp-section");var p=q.index(".pp-section");if(r>p){return"up"}return"down"}function H(p,s){var q={destination:p,animated:s,activeSection:A(".pp-section.active"),anchorLink:p.data("anchor"),sectionIndex:p.index(".pp-section"),toMove:p,yMovement:i(p),leavingSection:A(".pp-section.active").index(".pp-section")+1};if(q.activeSection.is(p)){return}if(typeof q.animated==="undefined"){q.animated=true}if(typeof q.anchorLink!=="undefined"){o(q.anchorLink)}q.destination.addClass("active").siblings().removeClass("active");q.sectionsToMove=B(q);if(q.yMovement==="down"){q.translate3d=n();q.scrolling="-100%";if(!K.css3){q.sectionsToMove.each(function(t){if(t!=q.activeSection.index(".pp-section")){A(this).css(h(q.scrolling))}})}q.animateSection=q.activeSection}else{q.translate3d="translate3d(0px, 0px, 0px)";q.scrolling="0";q.animateSection=p}A.isFunction(K.onLeave)&&K.onLeave.call(this,q.leavingSection,(q.sectionIndex+1),q.yMovement);Y(q);M(q.anchorLink);L(q.anchorLink,q.sectionIndex);d=q.anchorLink;var r=new Date().getTime();Q=r}function Y(p){if(K.css3){C(p.animateSection,p.translate3d,p.animated);p.sectionsToMove.each(function(){C(A(this),p.translate3d,p.animated)});setTimeout(function(){g(p)},K.scrollingSpeed)}else{p.scrollOptions=h(p.scrolling);if(p.animated){p.animateSection.animate(p.scrollOptions,K.scrollingSpeed,K.easing,function(){G(p);g(p)})}else{p.animateSection.css(h(p.scrolling));setTimeout(function(){G(p);g(p)},400)}}}function g(p){A.isFunction(K.afterLoad)&&K.afterLoad.call(this,p.anchorLink,(p.sectionIndex+1))}function B(q){var p;if(q.yMovement==="down"){p=A(".pp-section").map(function(r){if(r<q.destination.index(".pp-section")){return A(this)}})}else{p=A(".pp-section").map(function(r){if(r>q.destination.index(".pp-section")){return A(this)}})}return p}function G(q){var p;if(q.yMovement==="up"){p=function(){q.sectionsToMove.each(function(r){A(this).css(h(q.scrolling))})}}return p}function h(p){if(K.direction==="vertical"){return{"top":p}}return{"left":p}}function Z(q,p){if(K.css3){C(q,n(),false)}else{q.css(h(p))}}function o(p){if(K.anchors.length){location.hash=p}}function E(){var r=window.location.hash.replace("#","");var q=r;var p=A('.pp-section[data-anchor="'+q+'"]');if(p.length>0){H(p,K.animateAnchor)}}function l(){var p=new Date().getTime();if(p-Q<j+K.scrollingSpeed){return true}return false}A(window).on("hashchange",W);function W(){if(!needscrollPage){return}var s=window.location.hash.replace("#","").split("/");var r=s[0];if(r.length){var p=(typeof d==="undefined");if(r&&r!==d){if(isNaN(r)){var q=A('[data-anchor="'+r+'"]')}else{var q=A(".pp-section").eq((r-1))}H(q)}}}function f(p){return{"-webkit-transform":p,"-moz-transform":p,"-ms-transform":p,"transform":p}}function C(q,p,r){q.toggleClass("pp-easing",r);q.css(f(p))}A(document).keydown(function(p){if(K.keyboardScrolling&&!l()){switch(p.which){case 38:case 33:A.fn.pagepiling.moveSectionUp();break;case 40:case 34:A.fn.pagepiling.moveSectionDown();break;case 36:A.fn.pagepiling.moveTo(1);break;case 35:A.fn.pagepiling.moveTo(A(".pp-section").length);break;case 37:A.fn.pagepiling.moveSectionUp();break;case 39:A.fn.pagepiling.moveSectionDown();break;default:return}}});if(K.normalScrollElements){A(document).on("mouseenter",K.normalScrollElements,function(){A.fn.pagepiling.setMouseWheelScrolling(false)});A(document).on("mouseleave",K.normalScrollElements,function(){A.fn.pagepiling.setMouseWheelScrolling(true)})}function X(r){if(!l()){r=window.event||r;var p=Math.max(-1,Math.min(1,(r.wheelDelta||-r.deltaY||-r.detail)));var s=A(".pp-section.active");var q=k(s);if(p<0){c("down",q)}else{c("up",q)}return false}}function c(p,q){if(p=="down"){var r="bottom";var s=A.fn.pagepiling.moveSectionDown}else{var r="top";var s=A.fn.pagepiling.moveSectionUp}if(q.length>0){if(isScrolled(r,q)){s()}else{return true}}else{s()}}function k(p){scrollable=p.find(".pp-scrollable");return scrollable}function R(){if(N.get(0).addEventListener){N.get(0).removeEventListener("mousewheel",X,false);N.get(0).removeEventListener("wheel",X,false)}else{N.get(0).detachEvent("onmousewheel",X)}}function O(){if(N.get(0).addEventListener){N.get(0).addEventListener("mousewheel",X,false);N.get(0).addEventListener("wheel",X,false)}else{N.get(0).attachEvent("onmousewheel",X)}}function J(){if(D){MSPointer=U();N.off("touchstart "+MSPointer.down).on("touchstart "+MSPointer.down,b);N.off("touchmove "+MSPointer.move).on("touchmove "+MSPointer.move,F)}}function P(){if(D){MSPointer=U();N.off("touchstart "+MSPointer.down);N.off("touchmove "+MSPointer.move)}}function U(){var p;if(window.PointerEvent){p={down:"pointerdown",move:"pointermove",up:"pointerup"}}else{p={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}return p}function V(p){var q=new Array();if(window.navigator.msPointerEnabled){q["y"]=p.pageY;q["x"]=p.pageX}else{q["y"]=p.touches[0].pageY;q["x"]=p.touches[0].pageX}return q}function b(q){var p=q.originalEvent;var r=V(p);T=r["y"];touchStartX=r["x"]}function F(s){var q=s.originalEvent;if(!S(s.target)){s.preventDefault();var r=A(".pp-section.active");var p=k(r);if(!l()){var t=V(q);touchEndY=t["y"];touchEndX=t["x"];if(K.direction==="horizontal"&&Math.abs(touchStartX-touchEndX)>(Math.abs(T-touchEndY))){if(Math.abs(touchStartX-touchEndX)>(N.width()/100*K.touchSensitivity)){if(touchStartX>touchEndX){c("down",p)}else{if(touchEndX>touchStartX){c("up",p)}}}}else{if(Math.abs(T-touchEndY)>(N.height()/100*K.touchSensitivity)){if(T>touchEndY){c("down",p)}else{if(touchEndY>T){c("up",p)}}}}}}}function S(p,q){q=q||0;var r=A(p).parent();if(q<K.normalScrollElementTouchThreshold&&r.is(K.normalScrollElements)){return true}else{if(q==K.normalScrollElementTouchThreshold){return false}else{return S(r,++q)}}}function a(){A("body").append('<div id="pp-nav"><ul></ul></div>');var p=A("#pp-nav");p.css("color",K.navigation.textColor);p.addClass(K.navigation.position);for(var q=0;q<A(".pp-section").length;q++){var s="";if(K.anchors.length){s=K.anchors[q]}if(typeof K.navigation.tooltips!=="undefined"){var r=K.navigation.tooltips[q];if(typeof r==="undefined"){r=""}}p.find("ul").append('<li data-tooltip="'+r+'"><a href="#'+s+'"><span></span></a></li>')}p.find("span").css("border-color",K.navigation.bulletsColor)}A(document).on("click touchstart","#pp-nav a",function(p){p.preventDefault();var q=A(this).parent().index();H(A(".pp-section").eq(q))});A(document).on({mouseenter:function(){var p=A(this).data("tooltip");A('<div class="pp-tooltip '+K.navigation.position+'">'+p+"</div>").hide().appendTo(A(this)).fadeIn(200)},mouseleave:function(){A(this).find(".pp-tooltip").fadeOut(200,function(){A(this).remove()})}},"#pp-nav li");function L(p,q){if(K.navigation){A("#pp-nav").find(".active").removeClass("active");if(p){A("#pp-nav").find('a[href="#'+p+'"]').addClass("active")}else{A("#pp-nav").find("li").eq(q).find("a").addClass("active")}}}function M(p){if(K.menu){A(K.menu).find(".active").removeClass("active");A(K.menu).find('[data-menuanchor="'+p+'"]').addClass("active")}}function I(){var p=document.createElement("p"),q,s={"webkitTransform":"-webkit-transform","OTransform":"-o-transform","msTransform":"-ms-transform","MozTransform":"-moz-transform","transform":"transform"};document.body.insertBefore(p,null);for(var r in s){if(p.style[r]!==undefined){p.style[r]="translate3d(1px,1px,1px)";q=window.getComputedStyle(p).getPropertyValue(s[r])}}document.body.removeChild(p);return(q!==undefined&&q.length>0&&q!=="none")}function n(){if(K.direction!=="vertical"){return"translate3d(-100%, 0px, 0px)"}return"translate3d(0px, -100%, 0px)"}}})(jQuery);